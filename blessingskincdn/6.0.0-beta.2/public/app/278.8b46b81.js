(self.webpackChunkblessing_skin_server=self.webpackChunkblessing_skin_server||[]).push([[278],{2031:(n,e,t)=>{"use strict";t.r(e),t.d(e,{launch:()=>S});var o=t(5893),s=t(3804),i=t(7196),r=t.n(i),a=t(574),c=t(2320),d=t(2617),l=t(5810),m=t(1193),u=t.n(m),p=t(3601),h=t(8426),f=t(9439),v=t.n(f),g=t(6703);function w(n){return{write:e=>(n.print(e.replace(/\n/g,"\r\n")),!0)}}var x=t(6615);const{dots:y}=x;class b{constructor(n){this.stdio=n,this.timerId=0,this.index=0}start(n=""){this.timerId=window.setInterval((()=>{this.index+=1,this.index%=y.frames.length,this.stdio.reset(),this.stdio.print(`${y.frames[this.index]} ${n}`)}),y.interval)}stop(n=""){clearInterval(this.timerId),this.stdio.reset(),this.stdio.println(n),this.stdio.print("[?25h")}}async function j(n,e){const t=new b(e);t.start("Installing plugin...");const{message:o,data:s}=await g.v_("/admin/plugins/market/download",{name:n});t.stop("  "+o);const i=null==s?void 0:s.reason;i&&e.println(i.map((n=>"- "+n)).join("\r\n"))}async function k(n,e){const{confirm:t}=await v()({name:"confirm",type:"confirm",message:`Are you sure to remove plugin "${n}"?`,stdin:{on(n,e){"keypress"===n&&(this._off=p.on("terminalKeyPress",(n=>{e(n,n)})))},isTTY:!0,setRawMode(){},removeListener(){this._off()}},stdout:w(e)});if(!t)return;const o=new b(e);o.start("Uninstalling plugin...");const{message:s}=await g.v_("/admin/plugins/manage",{action:"delete",name:n});o.stop("  "+s)}async function $(n,e){const t=(0,h.ZP)("apt");t.help(),t.command("install <plugin>","install a new plugin").action((e=>j(e,n))),t.command("upgrade <plugin>","upgrade an existed plugin").action((e=>j(e,n))),t.command("remove <plugin>","remove a plugin").action((e=>k(e,n))),t.parse(["",""].concat(e),{run:!1}),await t.runMatchedCommand()}async function C(n,e){const t=(0,h.ZP)("closet");t.help(),t.command("add <uid> <tid>","add texture to someone's closet").action((async(e,t)=>{const{code:o,data:s}=await g.v_("/admin/closet/"+e,{tid:t});if(0===o){const{texture:e,user:t}=s;n.println(`Texture "${e.name}" was added to user ${t.nickname}'s closet.`)}else n.println("Error occurred.")})),t.command("remove <uid> <tid>","remove texture from someone's closet").action((async(e,t)=>{const{code:o,data:s}=await g.IV("/admin/closet/"+e,{tid:t});if(0===o){const{texture:e,user:t}=s;n.println(`Texture "${e.name}" was removed from user ${t.nickname}'s closet.`)}else n.println("Error occurred.")})),t.parse(["",""].concat(e),{run:!1}),await t.runMatchedCommand()}async function _(n,e){const t=(0,h.ZP)("dnf");t.help(),t.command("install <plugin>","install a new plugin").action((e=>j(e,n))),t.command("upgrade <plugin>","upgrade an existed plugin").action((e=>j(e,n))),t.command("remove <plugin>","remove a plugin").action((e=>k(e,n))),t.parse(["",""].concat(e),{run:!1}),await t.runMatchedCommand()}async function I(n,e){if(0===e.length)return void n.println("error: no operation specified (use -h for help)");const t=(0,h.ZP)("pacman");t.help(),t.option("-S, --sync <plugin>","install or upgrade a plugin"),t.option("-R, --remove <plugin>","remove a plugin");const{options:o}=t.parse(["",""].concat(e),{run:!1}),s=o;s.sync?await j(s.sync,n):s.remove&&await k(s.remove,n)}async function N(n,e){const t=(0,h.ZP)("rm");t.help(),t.command("<file>").option("-f, --force","ignore nonexistent files and arguments, never prompt").option("-r, --recursive","remove directories and their contents recursively").option("--no-preserve-root","do not treat '/' specially");const o=t.parse(["",""].concat(e),{run:!1}).options,s=t.args[0];s||o.help||(n.println("rm: missing operand"),n.println("Try 'rm --help' for more information.")),o.force&&o.recursive&&s.startsWith("/")&&await g.v_("/admin/resource?clear-cache")}var E=t(550);let M=!1;const P=a.Z.div`
  z-index: 1040;
  position: fixed;
  bottom: 7vh;
  user-select: none;

  .card-body {
    background-color: #000;
  }

  ${E.tS(E.Uo.xl)} {
    left: 25vw;
    width: 50vw;
    height: 50vh;
  }

  ${E.vX(E.Uo.md,E.Uo.xl)} {
    left: 5vw;
    width: 90vw;
    height: 40vh;
  }

  ${E.Qj(E.Uo.md)} {
    left: 1vw;
    width: 98vw;
    height: 35vh;
  }
`,O=n=>{const e=(0,s.useRef)(null);return(0,s.useEffect)((()=>{const n=e.current;if(!n)return;const t=new c.Terminal,o=new d.FitAddon;t.loadAddon(o),t.setOption("fontFamily",'Monaco, Consolas, "Roboto Mono", "Noto Sans", "Droid Sans Mono"'),t.open(n),o.fit();const s=new Map;s.set("apt",$),s.set("closet",C),s.set("dnf",_),s.set("pacman",I),s.set("rm",N),p.j("registerCLIPrograms",s);const i=new l.N2(t);s.forEach(((n,e)=>{i.addExternal(e,n)}));const r=console.log;console.log=(n,...e)=>{const o=(new Error).stack;(null==o?void 0:o.includes("outputHelp"))?t.writeln(n.replace(/\n/g,"\r\n")):r(n,...e)};const a=t.onData((n=>i.input(n))),m=t.onKey((n=>p.j("terminalKeyPress",n.key)));return M=!0,()=>{a.dispose(),m.dispose(),i.free(),o.dispose(),t.dispose(),console.log=r,M=!1}}),[]),(0,o.jsx)(u(),Object.assign({handle:".card-header"},{children:(0,o.jsxs)(P,Object.assign({className:"card"},{children:[(0,o.jsx)("div",Object.assign({className:"card-header"},{children:(0,o.jsxs)("div",Object.assign({className:"d-flex justify-content-between"},{children:[(0,o.jsx)("h4",Object.assign({className:"card-title d-flex align-items-center"},{children:"Blessing Skin Shell"}),void 0),(0,o.jsx)("button",Object.assign({className:"btn btn-default",onClick:n.onClose},{children:"Ã—"}),void 0)]}),void 0)}),void 0),(0,o.jsx)("div",{className:"card-body p-2",ref:e},void 0)]}),void 0)}),void 0)};function S(){if(M)return;const n=document.createElement("div");document.body.appendChild(n),r().render((0,o.jsx)(O,{onClose:()=>{r().unmountComponentAtNode(n),n.remove()}},void 0),n)}},7912:(n,e,t)=>{"use strict";function o(){}function s(){return{pause(){},resume(){},close(){}}}t.r(e),t.d(e,{emitKeypressEvents:()=>o,createInterface:()=>s})},550:(n,e,t)=>{"use strict";var o;function s(n){return`@media (max-width: ${n}px)`}function i(n,e){return`@media (min-width: ${n}px) and (max-width: ${e}px)`}function r(n){return`@media (min-width: ${n}px)`}t.d(e,{Uo:()=>o,Qj:()=>s,vX:()=>i,tS:()=>r}),function(n){n[n.xs=0]="xs",n[n.sm=576]="sm",n[n.md=768]="md",n[n.lg=992]="lg",n[n.xl=1200]="xl"}(o||(o={}))}}]);