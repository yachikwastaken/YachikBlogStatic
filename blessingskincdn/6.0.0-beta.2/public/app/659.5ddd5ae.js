(self.webpackChunkblessing_skin_server=self.webpackChunkblessing_skin_server||[]).push([[659],{9072:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var i=t(5893);t(3804);const a=new Map([["success","check"],["info","info"],["warning","exclamation-triangle"],["danger","times-circle"]]),n=e=>{const{type:s}=e,t=a.get(s);return e.children?(0,i.jsxs)("div",Object.assign({className:"alert alert-"+s},{children:[(0,i.jsx)("i",{className:"icon fas fa-"+t},void 0),e.children]}),void 0):null}},7694:(e,s,t)=>{"use strict";t.d(s,{Z:()=>h});var i=t(5944),a=t(3804),n=t(7745),r=t.n(n),o=t(3601),c=t(88),l=t(6051);const u=Symbol();class d extends a.Component{constructor(e){super(e),this.execute=async()=>{const e=this.ref.current;return e&&this.state.invisible?new Promise((s=>{const t=(0,o.on)(u,(e=>{s(e),t()}));e.execute()})):this.state.value},this.reset=()=>{const e=this.ref.current;e?e.reset():this.setState({time:Date.now()})},this.handleValueChange=e=>{this.setState({value:e.target.value})},this.handleVerify=e=>{(0,o.j)(u,e),this.setState({value:e})},this.handleRefresh=()=>{this.setState({time:Date.now()})},this.state={value:"",time:Date.now(),sitekey:blessing.extra.recaptcha,invisible:blessing.extra.invisible},this.ref=a.createRef()}render(){return this.state.sitekey?(0,i.tZ)("div",Object.assign({className:"mb-2"},{children:(0,i.tZ)(r(),{ref:this.ref,sitekey:this.state.sitekey,size:this.state.invisible?"invisible":"normal",onVerify:this.handleVerify},void 0)}),void 0):(0,i.BX)("div",Object.assign({className:"d-flex"},{children:[(0,i.tZ)("div",Object.assign({className:"form-group mb-3 mr-2"},{children:(0,i.tZ)("input",{type:"text",className:"form-control",placeholder:(0,c.t)("auth.captcha"),required:!0,value:this.state.value,onChange:this.handleValueChange},void 0)}),void 0),(0,i.tZ)("img",{src:`${blessing.base_url}/auth/captcha?v=${this.state.time}`,alt:(0,c.t)("auth.captcha"),css:l.G,height:34,title:(0,c.t)("auth.change-captcha"),onClick:this.handleRefresh},void 0)]}),void 0)}}const h=d},2982:(e,s,t)=>{"use strict";t.d(s,{Z:()=>h});var i=t(5944),a=t(3804),n=t(8808),r=t.n(n),o=t(917),c=t(3601),l=t(6051);const u=o.iv`
  .dropdown-menu li {
    ${l.G}
  }
`,d=new Set(["qq.com","163.com","gmail.com","hotmail.com"]),h=e=>{const[s,t]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(0,c.j)("emailDomainsSuggestion",d)}),[]),(0,i.tZ)("div",Object.assign({css:u},{children:(0,i.tZ)(r(),{suggestions:s,onSuggestionsFetchRequested:({value:e})=>{const s=e.split("@");t([...d].map((e=>`${s[0]}@${e}`)))},onSuggestionsClearRequested:()=>{t([])},getSuggestionValue:e=>e,renderSuggestion:e=>e,shouldRenderSuggestions:e=>[...d].some((s=>e.endsWith("@"+s)))||e.length>0&&!e.includes("@"),inputProps:Object.assign({},e,{onChange:(s,t)=>{e.onChange(t.newValue)}}),renderInputComponent:e=>(0,i.BX)("div",Object.assign({className:"input-group"},{children:[(0,i.tZ)("input",Object.assign({className:"form-control"},e),void 0),(0,i.tZ)("div",Object.assign({className:"input-group-append"},{children:(0,i.tZ)("div",Object.assign({className:"input-group-text"},{children:(0,i.tZ)("i",{className:"fas fa-envelope"},void 0)}),void 0)}),void 0)]}),void 0),theme:{container:"mb-3",suggestion:"dropdown-item",suggestionsContainer:"dropdown",suggestionsList:"dropdown-menu "+(s.length?"show":""),suggestionHighlighted:"active"}},void 0)}),void 0)}},9341:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var i=t(3804);function a(e,s){const[t,a]=(0,i.useState)(s);return(0,i.useEffect)((()=>{a(blessing.extra[e])}),[]),t}},9018:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var i=t(3804),a=t(3601);function n(){(0,i.useEffect)((()=>{(0,a.j)("mounted")}),[])}},6051:(e,s,t)=>{"use strict";t.d(s,{G:()=>a,b:()=>n});var i=t(917);const a=i.iv`
  cursor: pointer;
`,n=i.iv`
  display: flex;
  justify-content: center;
  align-items: center;
`},6659:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var i=t(5893),a=t(3804),n=t(1570),r=t(9341),o=t(9018),c=t(88),l=t(6703),u=t(439),d=t(8848),h=t(9072),g=t(7694),p=t(2982);const v=(0,n.w)((()=>{const[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)(""),[v,m]=(0,a.useState)(""),[j,b]=(0,a.useState)(""),[f,x]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[O,y]=(0,a.useState)(""),S=(0,r.Z)("player"),Z=(0,a.useRef)(null),C=(0,a.useRef)(null);return(0,o.Z)(),(0,i.jsxs)("form",Object.assign({onSubmit:async s=>{if(s.preventDefault(),y(""),t!==v)return y((0,c.t)("auth.invalidConfirmPwd")),void Z.current.focus();w(!0);const{code:i,message:a}=await l.v_(d.Z.auth.register(),Object.assign({email:e,password:t,captcha:await C.current.execute()},S?{player_name:f}:{nickname:j}));0===i?(u.A.success(a),setTimeout((()=>{window.location.href=blessing.base_url+"/user"}),3e3)):(y(a),C.current.reset()),w(!1)}},{children:[(0,i.jsx)(p.Z,{type:"email",required:!0,autoFocus:!0,placeholder:(0,c.t)("auth.email"),value:e,onChange:s},void 0),(0,i.jsxs)("div",Object.assign({className:"input-group mb-3"},{children:[(0,i.jsx)("input",{type:"password",required:!0,minLength:8,maxLength:32,className:"form-control",placeholder:(0,c.t)("auth.password"),autoComplete:"new-password",value:t,onChange:e=>{n(e.target.value)}},void 0),(0,i.jsx)("div",Object.assign({className:"input-group-append"},{children:(0,i.jsx)("div",Object.assign({className:"input-group-text"},{children:(0,i.jsx)("i",{className:"fas fa-lock"},void 0)}),void 0)}),void 0)]}),void 0),(0,i.jsxs)("div",Object.assign({className:"input-group mb-3"},{children:[(0,i.jsx)("input",{type:"password",required:!0,minLength:8,maxLength:32,className:"form-control",placeholder:(0,c.t)("auth.repeat-pwd"),autoComplete:"new-password",ref:Z,value:v,onChange:e=>{m(e.target.value)}},void 0),(0,i.jsx)("div",Object.assign({className:"input-group-append"},{children:(0,i.jsx)("div",Object.assign({className:"input-group-text"},{children:(0,i.jsx)("i",{className:"fas fa-sign-in-alt"},void 0)}),void 0)}),void 0)]}),void 0),S?(0,i.jsxs)("div",Object.assign({className:"input-group mb-3",title:(0,c.t)("auth.player-name-intro")},{children:[(0,i.jsx)("input",{type:"text",required:!0,className:"form-control",placeholder:(0,c.t)("auth.player-name"),value:f,onChange:e=>{x(e.target.value)}},void 0),(0,i.jsx)("div",Object.assign({className:"input-group-append"},{children:(0,i.jsx)("div",Object.assign({className:"input-group-text"},{children:(0,i.jsx)("i",{className:"fas fa-gamepad"},void 0)}),void 0)}),void 0)]}),void 0):(0,i.jsxs)("div",Object.assign({className:"input-group mb-3",title:(0,c.t)("auth.nickname-intro")},{children:[(0,i.jsx)("input",{type:"text",required:!0,className:"form-control",placeholder:(0,c.t)("auth.nickname"),value:j,onChange:e=>{b(e.target.value)}},void 0),(0,i.jsx)("div",Object.assign({className:"input-group-append"},{children:(0,i.jsx)("div",Object.assign({className:"input-group-text"},{children:(0,i.jsx)("i",{className:"fas fa-gamepad"},void 0)}),void 0)}),void 0)]}),void 0),(0,i.jsx)(g.Z,{ref:C},void 0),(0,i.jsx)(h.Z,Object.assign({type:"warning"},{children:O}),void 0),(0,i.jsxs)("div",Object.assign({className:"d-flex justify-content-between align-items-center mb-3"},{children:[(0,i.jsx)("a",Object.assign({href:blessing.base_url+"/auth/login"},{children:(0,c.t)("auth.login-link")}),void 0),(0,i.jsx)("button",Object.assign({className:"btn btn-primary",type:"submit",disabled:N},{children:N?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-spinner fa-spin mr-1"},void 0),(0,c.t)("auth.registering")]},void 0):(0,c.t)("auth.register")}),void 0)]}),void 0)]}),void 0)}))}}]);